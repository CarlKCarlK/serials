[env]
DEFMT_LOG = "info"

[alias]
# xtask command runner - note: must be run from workspace root
xtask = "run --manifest-path xtask/Cargo.toml --"
xtask-check = "check --manifest-path xtask/Cargo.toml"
# Test documentation examples
test-docs = "test --doc --target thumbv8m.main-none-eabihf --features pico2,wifi,arm --no-default-features"

# Pico 1 WiFi aliases
full-w = "run --example full --release --target thumbv6m-none-eabi --features pico1,arm,wifi"
full-w-check = "check --example full --release --target thumbv6m-none-eabi --features pico1,arm,wifi"
wireless-w = "run --example wireless --release --target thumbv6m-none-eabi --features pico1,arm,wifi"
wireless-w-check = "check --example wireless --release --target thumbv6m-none-eabi --features pico1,arm,wifi"
clock-lcd-w = "run --example clock_lcd --release --target thumbv6m-none-eabi --features pico1,arm,wifi"
clock-lcd-w-check = "check --example clock_lcd --release --target thumbv6m-none-eabi --features pico1,arm,wifi"
clock-led4-wifi-w = "run --example clock_led4_wifi --release --target thumbv6m-none-eabi --features pico1,arm,wifi"
clock-led4-wifi-w-check = "check --example clock_led4_wifi --release --target thumbv6m-none-eabi --features pico1,arm,wifi"
clock-servos-w = "run --example clock_servos --release --target thumbv6m-none-eabi --features pico1,arm,wifi"
clock-servos-w-check = "check --example clock_servos --release --target thumbv6m-none-eabi --features pico1,arm,wifi"
wifi-web-w = "run --example wifi_web --release --target thumbv6m-none-eabi --features pico1,arm,wifi"
wifi-web-w-check = "check --example wifi_web --release --target thumbv6m-none-eabi --features pico1,arm,wifi"
wifi-auto-w = "run --example wifi_auto --release --target thumbv6m-none-eabi --features pico1,arm,wifi"
wifi-auto-w-check = "check --example wifi_auto --release --target thumbv6m-none-eabi --features pico1,arm,wifi"
clock_console_w = "run --example clock_console --release --target thumbv6m-none-eabi --features pico1,arm,wifi"
clock_console_w_check = "check --example clock_console --release --target thumbv6m-none-eabi --features pico1,arm,wifi"
clock-led12x4-w = "run --example clock_led12x4 --release --target thumbv6m-none-eabi --features pico1,arm,wifi"
clock-led12x4-w-check = "check --example clock_led12x4 --release --target thumbv6m-none-eabi --features pico1,arm,wifi"
clock-led8x12-w = "run --example clock_led8x12 --release --target thumbv6m-none-eabi --features pico1,arm,wifi"
clock-led8x12-w-check = "check --example clock_led8x12 --release --target thumbv6m-none-eabi --features pico1,arm,wifi"
clock-simple = "run --example clock_simple --release --target thumbv6m-none-eabi --features pico1,arm"
clock-simple-check = "check --example clock_simple --release --target thumbv6m-none-eabi --features pico1,arm"

# Pico 2 ARM aliases
flash-2 = "run --example flash --release --target thumbv8m.main-none-eabihf --features pico2,arm --no-default-features"
flash-2-check = "check --example flash --release --target thumbv8m.main-none-eabihf --features pico2,arm --no-default-features"
full-2 = "run --example full --release --target thumbv8m.main-none-eabihf --features pico2,arm --no-default-features"
full-2-check = "check --example full --release --target thumbv8m.main-none-eabihf --features pico2,arm --no-default-features"
ir-2 = "run --example ir --release --target thumbv8m.main-none-eabihf --features pico2,arm --no-default-features"
ir-2-check = "check --example ir --release --target thumbv8m.main-none-eabihf --features pico2,arm --no-default-features"
ir-kepler-2 = "run --example ir_kepler --release --target thumbv8m.main-none-eabihf --features pico2,arm --no-default-features"
ir-kepler-2-check = "check --example ir_kepler --release --target thumbv8m.main-none-eabihf --features pico2,arm --no-default-features"
wireless-2 = "run --example wireless --release --target thumbv8m.main-none-eabihf --features pico2,arm --no-default-features"
wireless-2-check = "check --example wireless --release --target thumbv8m.main-none-eabihf --features pico2,arm --no-default-features"
clock-lcd-2 = "run --example clock_lcd --release --target thumbv8m.main-none-eabihf --features pico2,arm --no-default-features"
clock-lcd-2-check = "check --example clock_lcd --release --target thumbv8m.main-none-eabihf --features pico2,arm --no-default-features"
led-strip-2 = "run --example led_strip --release --target thumbv8m.main-none-eabihf --features pico2,arm --no-default-features"
led-strip-2-check = "check --example led_strip --release --target thumbv8m.main-none-eabihf --features pico2,arm --no-default-features"
led-strip2-2 = "run --example led_strip2 --release --target thumbv8m.main-none-eabihf --features pico2,arm --no-default-features"
led-strip2-2-check = "check --example led_strip2 --release --target thumbv8m.main-none-eabihf --features pico2,arm --no-default-features"
led-strip-simple-2 = "run --example led_strip_simple --release --target thumbv8m.main-none-eabihf --features pico2,arm --no-default-features"
led-strip-simple-2-check = "check --example led_strip_simple --release --target thumbv8m.main-none-eabihf --features pico2,arm --no-default-features"
led-strip-simple-two-2 = "run --example led_strip_simple_two --release --target thumbv8m.main-none-eabihf --features pico2,arm --no-default-features"
led-strip-simple-two-2-check = "check --example led_strip_simple_two --release --target thumbv8m.main-none-eabihf --features pico2,arm --no-default-features"
led-strip-two-2 = "run --example led_strip_simple_two --release --target thumbv8m.main-none-eabihf --features pico2,arm --no-default-features"
led-strip-two-2-check = "check --example led_strip_simple_two --release --target thumbv8m.main-none-eabihf --features pico2,arm --no-default-features"
led-strip-3-on-a-pio-2 = "run --example led_strip_3_on_a_pio --release --target thumbv8m.main-none-eabihf --features pico2,arm --no-default-features"
led-strip-3-on-a-pio-2-check = "check --example led_strip_3_on_a_pio --release --target thumbv8m.main-none-eabihf --features pico2,arm --no-default-features"
led-strip1-2 = "run --example led_strip1 --release --target thumbv8m.main-none-eabihf --features pico2,arm --no-default-features"
led-strip1-2-check = "check --example led_strip1 --release --target thumbv8m.main-none-eabihf --features pico2,arm --no-default-features"
led24x4-2 = "run --example led24x4 --release --target thumbv8m.main-none-eabihf --features pico2,arm --no-default-features"
led24x4-2-check = "check --example led24x4 --release --target thumbv8m.main-none-eabihf --features pico2,arm --no-default-features"
led12x4-2 = "run --example led12x4 --release --target thumbv8m.main-none-eabihf --features pico2,arm --no-default-features"
led12x4-2-check = "check --example led12x4 --release --target thumbv8m.main-none-eabihf --features pico2,arm --no-default-features"
led2d-2 = "run --example led2d --release --target thumbv8m.main-none-eabihf --features pico2,arm --no-default-features"
led2d-2-check = "check --example led2d --release --target thumbv8m.main-none-eabihf --features pico2,arm --no-default-features"
led8x12-2 = "run --example led8x12 --release --target thumbv8m.main-none-eabihf --features pico2,arm --no-default-features"
led8x12-2-check = "check --example led8x12 --release --target thumbv8m.main-none-eabihf --features pico2,arm --no-default-features"
led2d-custom-2 = "run --example led2d_custom_mapping --release --target thumbv8m.main-none-eabihf --features pico2,arm --no-default-features"
led2d-custom-2-check = "check --example led2d_custom_mapping --release --target thumbv8m.main-none-eabihf --features pico2,arm --no-default-features"
concat-h-2 = "run --example concat_h --release --target thumbv8m.main-none-eabihf --features pico2,arm --no-default-features"
concat-h-2-check = "check --example concat_h --release --target thumbv8m.main-none-eabihf --features pico2,arm --no-default-features"
clock-led12x4-2 = "run --example clock_led12x4 --release --target thumbv8m.main-none-eabihf --features pico2,arm,wifi --no-default-features"
clock-led12x4-2-check = "check --example clock_led12x4 --release --target thumbv8m.main-none-eabihf --features pico2,arm,wifi --no-default-features"
clock-led12x4-2w = "run --example clock_led12x4 --release --target thumbv8m.main-none-eabihf --features pico2,arm,wifi --no-default-features"
clock-led12x4-2w-check = "check --example clock_led12x4 --release --target thumbv8m.main-none-eabihf --features pico2,arm,wifi --no-default-features"
clock-led8x12-2w = "run --example clock_led8x12 --release --target thumbv8m.main-none-eabihf --features pico2,arm,wifi --no-default-features"
clock-led8x12-2w-check = "check --example clock_led8x12 --release --target thumbv8m.main-none-eabihf --features pico2,arm,wifi --no-default-features"
led-strip-snake-2 = "run --example led_strip_snake --release --target thumbv8m.main-none-eabihf --features pico2,arm --no-default-features"
led-strip-snake-2-check = "check --example led_strip_snake --release --target thumbv8m.main-none-eabihf --features pico2,arm --no-default-features"
video-2 = "run --example video --release --target thumbv8m.main-none-eabihf --features pico2,arm --no-default-features"
video-2-check = "check --example video --release --target thumbv8m.main-none-eabihf --features pico2,arm --no-default-features"
blinky-2 = "run --example blinky --release --target thumbv8m.main-none-eabihf --features pico2,arm --no-default-features"
blinky-2-check = "check --example blinky --release --target thumbv8m.main-none-eabihf --features pico2,arm --no-default-features"
servos-2 = "run --example servos --release --target thumbv8m.main-none-eabihf --features pico2,arm --no-default-features"
servos-2-check = "check --example servos --release --target thumbv8m.main-none-eabihf --features pico2,arm --no-default-features"
clock-simple-2 = "run --example clock_simple --release --target thumbv8m.main-none-eabihf --features pico2,arm --no-default-features"
clock-simple-2-check = "check --example clock_simple --release --target thumbv8m.main-none-eabihf --features pico2,arm --no-default-features"
wifi-web-2w = "run --example wifi_web --release --target thumbv8m.main-none-eabihf --features pico2,arm,wifi --no-default-features"
wifi-web-2w-check = "check --example wifi_web --release --target thumbv8m.main-none-eabihf --features pico2,arm,wifi --no-default-features"
clock-console-2w = "run --example clock_console --release --target thumbv8m.main-none-eabihf --features pico2,arm,wifi --no-default-features"
clock-console-2w-check = "check --example clock_console --release --target thumbv8m.main-none-eabihf --features pico2,arm,wifi --no-default-features"
clock-led12x4-wifi-2w = "run --example clock_led12x4 --release --target thumbv8m.main-none-eabihf --features pico2,arm,wifi --no-default-features"
clock-led12x4-wifi-2w-check = "check --example clock_led12x4 --release --target thumbv8m.main-none-eabihf --features pico2,arm,wifi --no-default-features"

# Pico 2 RISC-V alias (experimental - not fully working yet)
blinky-2r = "run --example blinky --release --target riscv32imac-unknown-none-elf --features pico2,riscv --no-default-features"
blinky-2r-check = "check --example blinky --release --target riscv32imac-unknown-none-elf --features pico2,riscv --no-default-features"

# Default aliases (Pico 1 ARM, no WiFi)
full = "run --example full --release --target thumbv6m-none-eabi --features pico1,arm"
full-check = "check --example full --release --target thumbv6m-none-eabi --features pico1,arm"
ir = "run --example ir --release --target thumbv6m-none-eabi --features pico1,arm"
ir-check = "check --example ir --release --target thumbv6m-none-eabi --features pico1,arm"
ir-kepler = "run --example ir_kepler --release --target thumbv6m-none-eabi --features pico1,arm"
ir-kepler-check = "check --example ir_kepler --release --target thumbv6m-none-eabi --features pico1,arm"
ir-remote = "run --example ir_remote --release --target thumbv6m-none-eabi --features pico1,arm"
ir-remote-check = "check --example ir_remote --release --target thumbv6m-none-eabi --features pico1,arm"
led-strip = "run --example led_strip --release --target thumbv6m-none-eabi --features pico1,arm"
led-strip-check = "check --example led_strip --release --target thumbv6m-none-eabi --features pico1,arm"
led-strip-simple = "run --example led_strip_simple --release --target thumbv6m-none-eabi --features pico1,arm"
led-strip-simple-check = "check --example led_strip_simple --release --target thumbv6m-none-eabi --features pico1,arm"
led-strip-simple-two = "run --example led_strip_simple_two --release --target thumbv6m-none-eabi --features pico1,arm"
led-strip-simple-two-check = "check --example led_strip_simple_two --release --target thumbv6m-none-eabi --features pico1,arm"
led-strip-two = "run --example led_strip_simple_two --release --target thumbv6m-none-eabi --features pico1,arm"
led-strip-two-check = "check --example led_strip_simple_two --release --target thumbv6m-none-eabi --features pico1,arm"
led-strip-3-on-a-pio = "run --example led_strip_3_on_a_pio --release --target thumbv6m-none-eabi --features pico1,arm"
led-strip-3-on-a-pio-check = "check --example led_strip_3_on_a_pio --release --target thumbv6m-none-eabi --features pico1,arm"
led-strip1 = "run --example led_strip1 --release --target thumbv6m-none-eabi --features pico1,arm"
led-strip1-check = "check --example led_strip1 --release --target thumbv6m-none-eabi --features pico1,arm"
flash = "run --example flash --release --target thumbv6m-none-eabi --features pico1,arm"
flash-check = "check --example flash --release --target thumbv6m-none-eabi --features pico1,arm"
blinky = "run --example blinky --release --target thumbv6m-none-eabi --features pico1,arm"
blinky-check = "check --example blinky --release --target thumbv6m-none-eabi --features pico1,arm"
servos = "run --example servos --release --target thumbv6m-none-eabi --features pico1,arm"
servos-check = "check --example servos --release --target thumbv6m-none-eabi --features pico1,arm"
led12x4 = "run --example led12x4 --release --target thumbv6m-none-eabi --features pico1,arm"
led12x4-check = "check --example led12x4 --release --target thumbv6m-none-eabi --features pico1,arm"
led2d = "run --example led2d --release --target thumbv6m-none-eabi --features pico1,arm"
led2d-check = "check --example led2d --release --target thumbv6m-none-eabi --features pico1,arm"
led8x12 = "run --example led8x12 --release --target thumbv6m-none-eabi --features pico1,arm"
led8x12-check = "check --example led8x12 --release --target thumbv6m-none-eabi --features pico1,arm"
led2d-custom = "run --example led2d_custom_mapping --release --target thumbv6m-none-eabi --features pico1,arm"
led2d-custom-check = "check --example led2d_custom_mapping --release --target thumbv6m-none-eabi --features pico1,arm"
concat-h = "run --example concat_h --release --target thumbv6m-none-eabi --features pico1,arm"
concat-h-check = "check --example concat_h --release --target thumbv6m-none-eabi --features pico1,arm"
video = "run --example video --release --target thumbv6m-none-eabi --features pico1,arm"
video-check = "check --example video --release --target thumbv6m-none-eabi --features pico1,arm"

# Documentation alias
# Note: Using pico2,arm,wifi instead of pico1,arm,wifi because embassy-rp from git main
# currently has a regression with Cortex-M0+ (tries to access MPU.rasr field that doesn't exist).
docdoc = "doc --target thumbv8m.main-none-eabihf --no-deps --features pico2,arm,wifi --no-default-features --open"
docdoc-check = "check --target thumbv8m.main-none-eabihf --no-deps --features pico2,arm,wifi --no-default-features"

[target.thumbv6m-none-eabi]
runner = "probe-rs run --chip=RP2040"
rustflags = ["-C", "link-arg=-Tlink.x", "-C", "link-arg=-Tdefmt.x"]

[target.thumbv8m.main-none-eabihf]
runner = "probe-rs run --chip=RP235x"
rustflags = [
    "-C",
    "link-arg=-Tlink.x",
    "-C",
    "link-arg=-Tlink-rp.x",
    "-C",
    "link-arg=-Tdefmt.x",
]

[target.riscv32imac-unknown-none-elf]
runner = "probe-rs run --chip=RP235x"
rustflags = ["-C", "link-arg=-Tlink.x", "-C", "link-arg=-Tdefmt.x"]
